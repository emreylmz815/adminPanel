@model WebApplication1.Models.CRM.ViewModels.QuoteFormViewModel
@{
    ViewBag.Title = "Quote Details";
}
<h2>@Model.Quote.Title</h2>

<div class="btn-group">
    @using (Html.BeginForm("Status", "Quotes", FormMethod.Post))
    {
        @Html.AntiForgeryToken()
        @Html.Hidden("id", Model.Quote.Id)
        @Html.Hidden("action", "send")
        <button type="submit" class="btn btn-default">Send</button>
    }
    @using (Html.BeginForm("Status", "Quotes", FormMethod.Post))
    {
        @Html.AntiForgeryToken()
        @Html.Hidden("id", Model.Quote.Id)
        @Html.Hidden("action", "approve")
        <button type="submit" class="btn btn-success">Approve</button>
    }
    @using (Html.BeginForm("Status", "Quotes", FormMethod.Post))
    {
        @Html.AntiForgeryToken()
        @Html.Hidden("id", Model.Quote.Id)
        @Html.Hidden("action", "reject")
        <button type="submit" class="btn btn-warning">Reject</button>
    }
    @using (Html.BeginForm("Status", "Quotes", FormMethod.Post))
    {
        @Html.AntiForgeryToken()
        @Html.Hidden("id", Model.Quote.Id)
        @Html.Hidden("action", "expire")
        <button type="submit" class="btn btn-danger">Expire</button>
    }
</div>

<div class="panel panel-default" style="margin-top:15px;">
    <div class="panel-heading">Summary</div>
    <div class="panel-body">
        <dl class="dl-horizontal">
            <dt>Quote No</dt><dd>@Model.Quote.No</dd>
            <dt>Status</dt><dd>@Model.Quote.Status</dd>
            <dt>Total</dt><dd>@Model.Quote.Total.ToString("C")</dd>
            <dt>Profit Rate</dt><dd>@(Model.Quote.ProfitRate.HasValue ? Model.Quote.ProfitRate.Value.ToString("P") : "-")</dd>
        </dl>
    </div>
</div>

<h4>Lines</h4>
<table class="table table-bordered">
    <thead>
        <tr>
            <th>Name</th>
            <th>Qty</th>
            <th>Unit Price</th>
            <th>Total</th>
        </tr>
    </thead>
    <tbody>
    @foreach (var line in Model.Quote.Lines)
    {
        <tr>
            <td>@line.Name</td>
            <td>@line.Qty</td>
            <td>@line.UnitPrice.ToString("C")</td>
            <td>@line.LineTotal.ToString("C")</td>
        </tr>
    }
    </tbody>
</table>

<h4>Email Quote</h4>
@using (Html.BeginForm("Email", "Quotes", FormMethod.Post))
{
    @Html.AntiForgeryToken()
    @Html.Hidden("QuoteId", Model.Quote.Id)
    <div class="form-group">
        <label>To</label>
        <input type="email" name="To" class="form-control" />
    </div>
    <div class="form-group">
        <label>Cc</label>
        <input type="email" name="Cc" class="form-control" />
    </div>
    <div class="form-group">
        <label>Subject</label>
        <input type="text" name="Subject" class="form-control" value="Quote: @Model.Quote.Title" />
    </div>
    <div class="form-group">
        <label>Body</label>
        <textarea name="Body" class="form-control" rows="4">Please find the attached quote.</textarea>
    </div>
    <button type="submit" class="btn btn-primary">Send Email</button>
}
