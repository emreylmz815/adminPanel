@model WebApplication1.Models.CRM.ViewModels.TaskFormViewModel
@{
    ViewBag.Title = "Task Details";
}
<h2>@Model.Task.Title</h2>

<dl class="dl-horizontal">
    <dt>Status</dt><dd>@Model.Task.Status</dd>
    <dt>Priority</dt><dd>@Model.Task.Priority</dd>
    <dt>Assignee</dt><dd>@Model.Task.AssigneeUserId</dd>
    <dt>Due Date</dt><dd>@Model.Task.DueDate?.ToShortDateString()</dd>
</dl>

<h4>Comments</h4>
@if (ViewBag.Comments != null)
{
    <ul class="list-group">
    @foreach (WebApplication1.Models.CRM.TaskComment comment in ViewBag.Comments)
    {
        <li class="list-group-item">
            <strong>@comment.CreatedAt.ToShortDateString()</strong>
            <p>@comment.Content</p>
        </li>
    }
    </ul>
}

@using (Html.BeginForm("Comment", "Tasks", new { id = Model.Task.Id }, FormMethod.Post))
{
    @Html.AntiForgeryToken()
    <div class="form-group">
        <textarea name="Content" class="form-control" rows="3" placeholder="Add a comment"></textarea>
    </div>
    <button type="submit" class="btn btn-primary">Add Comment</button>
}
